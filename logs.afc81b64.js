let e,t,n,r,a,l;function i(e){return e&&e.__esModule?e.default:e}var o=globalThis,d={},u={},c=o.parcelRequire94c2;null==c&&((c=function(e){if(e in d)return d[e].exports;if(e in u){var t=u[e];delete u[e];var n={id:e,exports:{}};return d[e]=n,t.call(n.exports,n,n.exports),n.exports}var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){u[e]=t},o.parcelRequire94c2=c),c.register;var s=c("lR3v8"),h=c("47Mwn"),g=c("9HrqM");i(s).setLevel("info"),i(s).info("Application started");let m=[],p=[];const E=JSON.parse(localStorage.getItem("email")),f=JSON.parse(localStorage.getItem("userID"));async function v(){let e=(0,g.query)((0,g.collection)(h.db,"logs",f,"logs"),(0,g.orderBy)("addTime","desc"));return await (0,g.getDocs)(e)}async function y(e,t,n,r,a){return(await (0,g.addDoc)((0,g.collection)(h.db,"logs",f,"logs"),{title:e,author:t,genre:n,rating:r,thoughts:a,addTime:(0,g.Timestamp).now()})).id}async function x(){l||(l=[],(await v()).docs.forEach(e=>{let t=e.data();l.push({id:e.id,data:{title:t.title,author:t.author,genre:t.genre,rating:parseInt(t.rating),thoughts:t.thoughts}})})),e.innerHTML="",l.forEach(e=>{let r=e.data;(function(e){if(!m.includes(e)){m.push(e),m.sort(),t.innerHTML="";let n=document.createElement("option");n.value="",n.innerText="Author",t.appendChild(n),m.forEach(e=>{let n=document.createElement("option");n.value=e,n.innerText=e,t.appendChild(n)})}})(r.author),function(e){if(!p.includes(e)){p.push(e),p.sort(),n.innerHTML="";let t=document.createElement("option");t.value="",t.innerText="Genre",n.appendChild(t),p.forEach(e=>{let t=document.createElement("option");t.value=e,t.innerText=e,n.appendChild(t)})}}(r.genre),0==t.value.length&&0==n.value.length?T(e.id,r.title,r.author,r.genre,r.rating,r.thoughts):0==t.value&&n.value==r.genre?T(e.id,r.title,r.author,r.genre,r.rating,r.thoughts):t.value==r.author&&0==n.value?T(e.id,r.title,r.author,r.genre,r.rating,r.thoughts):t.value==r.author&&n.value==r.genre&&T(e.id,r.title,r.author,r.genre,r.rating,r.thoughts)})}function T(t,n,r,a,l,i,o=!1){let d=document.createElement("h3");d.innerText=n;let u=document.createElement("p"),c="";for(let e=1;e<=l;e++)c+="★";u.innerText=c.padEnd(5,"☆"),u.ariaLabel=`Rated ${l} of 5`;let s=document.createElement("p");s.innerText=r,s.ariaLabel=`By ${r}`;let h=document.createElement("p");h.innerText=a,h.ariaLabel=`Genre ${a}`;let g=document.createElement("div");g.appendChild(d),g.appendChild(u),g.appendChild(s),g.appendChild(h);let m=document.createElement("p");m.innerText=i;let p=document.createElement("li");p.appendChild(g),p.appendChild(m),o?e.prepend(p):e.appendChild(p)}function L(e){let t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","&":"&amp;","/":"&#x2F;"};return e.replace(/[<>"'&/]/g,e=>t[e])}async function I(e){e.preventDefault();let t=Object.fromEntries(new FormData(e.target).entries()),n=L(t.title.trim()),i=L(t.author.trim()),o=L(t.genre.trim()),d=parseInt(t.rating),u=L(t.thoughts.trim()),c=!1;if(n.length<1?c=!0:i.length<1?c=!0:o.length<1?c=!0:u.length<1&&(c=!0),c){alert("You must fill in all fields.");return}r.style.display="none",a.reset();let s=await y(n,i,o,d,u);l.push({id:s,data:{title:n,author:i,genre:o,rating:parseInt(d),thoughts:u}}),T(s,n,i,o,d,u,!0)}E||(window.location.href="index.html"),window.addEventListener("load",()=>{document.getElementById("logout").addEventListener("click",()=>{localStorage.removeItem("email"),window.location.href="index.html"}),e=document.getElementById("logList"),(t=document.getElementById("authorFilter")).addEventListener("change",()=>{x()}),(n=document.getElementById("genreFilter")).addEventListener("change",()=>{x()}),document.getElementById("add").addEventListener("click",()=>{r.style.display="block"}),document.getElementById("closeAdd").addEventListener("click",()=>{r.style.display="none",a.reset()}),r=document.getElementById("addBookSection"),(a=document.getElementById("addBook")).addEventListener("submit",I),x()});
//# sourceMappingURL=logs.afc81b64.js.map
